(function(d){function c(a){this.yen=a.yen;this.kural=a.label;this.adhikaram=this.get_adhikaram();this.porul=this.get_porul();this.view=this.generate_view()}function b(a){this.yen=a.yen;this.title=a.title;this.view=this.generate_view();this.$el=$("#adhikaram-view")}d.Suvadi={version:"0.1",data:{kural:[],adhikaram:[],porul:[]},kural:[],adhikaram:[],current:{kural:0,adhikaram:0},$jf:[],status:{is_ulleedu_udhavi_loaded:!1,is_suvadi_patri_loaded:!1,debug_mode:!1},loader:{$el:$("#kural-loading"),show:function(){this.$el.show()},
hide:function(){this.$el.hide()}},init:function(){var a=this;this.loader.hide();var b=JSON.parse(localStorage.getItem("Suvadi_sources")),c=!1,f=this.version;b&&(c=b.version.toString());this.status.debug_mode||!c||0>versionCompare(c,f)?$.cachedScript("js/min/sources.min.js").done(function(b,c){localStorage.setItem("Suvadi_sources",JSON.stringify({version:f,data:a.data}));a.init_continue()}):(this.data=b.data,a.init_continue())},init_continue:function(){this.register_handlers();var a=localStorage.getItem("adhikaram_viruppam")||
1;this.adhikaram[a]||(this.adhikaram[a]=new b(this.data.adhikaram[a]));this.adhikaram[a].display();$.each(this.settings,function(a,b){b.init()});this.viruppam.init()},settings:{kural_viruppam:{$el:{info:$("#viruppam_setting_info"),checkbox:$("#viruppam_setting_switch")},init:function(){var a=this;this.$el.checkbox.flipswitch({defaults:!0});this.$el.checkbox.change(function(){$(this).is(":checked")?a.switchOn():a.switchOff()})},enable:function(){this.$el.info.html("விருப்பமாக குறிக்கப்பட்டுள்ள அனைத்து குறள்களையும் அழிக்க கீழ் உள்ள பொத்தானை சுட்டவும்");
this.$el.checkbox.flipswitch("enable");this.$el.checkbox.prop("checked",!0)},disable:function(){this.$el.info.html("குறள்கள் விருப்பமாக குறிக்கப்படவில்லை");this.$el.checkbox.prop("checked",!1);this.$el.checkbox.flipswitch("disable")},switchOn:function(){},switchOff:function(){localStorage.removeItem("kural_viruppam");this.disable()},refresh:function(){$.isEmptyObject(Suvadi.viruppam.data)?this.disable():this.enable();this.$el.checkbox.flipswitch("refresh")}}},viruppam:{data:{},$el:"",init:function(){this.$el=
$("#viruppam-view");this.data=JSON.parse(localStorage.getItem("kural_viruppam"));var a=this.$el;a.html("");if($.isEmptyObject(this.data))this.data={},this.$el.append("<div class='info'> குறள்கள் விருப்பமாக குறிக்கப்படவில்லை  </div>"),Suvadi.settings.kural_viruppam.disable();else{var b=[];$.each(this.data,function(a,c){b.push(c)});b.sort(function(a,b){return b.created-a.created});$.each(b,function(b,f){var d=parseInt(f.yen,10);Suvadi.kural[d]||(Suvadi.kural[d]=new c(Suvadi.data.kural[d]));var e=$("<div>",
{"class":"ui-corner-all custom-corners viruppam","data-kural-yen":d}).on("swipeleft",function(){var a=$(this).data("kural-yen");Suvadi.viruppam.handle_swipe(this,"left",a)}).on("swiperight",function(){var a=$(this).data("kural-yen");Suvadi.viruppam.handle_swipe(this,"right",a)}).on("click",function(){var a=$(this).data("kural-yen");Suvadi.show_kural(a)}),g=$('<div class="ui-bar ui-bar-a kural-header">                                                <h3>31. பொறையுடைமை</h3>                                                <span class="kural-number">224</span>                                              </div>'),
h=$("<span>",{"class":"star starred","data-kural-yen":d}).on("click",function(){$(this).removeClass("starred");g.trigger("swipeleft");return!1});g.append(h);h=$('<div class="ui-body ui-body-a">                                              </div>');g.children("h3").text(Suvadi.kural[d].adhikaram.yen+". "+Suvadi.kural[d].adhikaram.title);g.children("span.kural-number").text(d);h.html(Suvadi.kural[d].view);e.append(g).append(h);a.append(e)});Suvadi.settings.kural_viruppam.enable()}},save:function(a){this.data[a]=
{created:(new Date).getTime(),yen:a};localStorage.setItem("kural_viruppam",JSON.stringify(this.data))},remove:function(a){delete this.data[a];localStorage.setItem("kural_viruppam",JSON.stringify(this.data))},handle_swipe:function(a,b,c){this.remove(c);c=$(a).width();$(a).css({position:"static",width:c+"px",opacity:"0.8"});b="left"==b?"-"+c+"px":c+"px";$(a).animate({marginLeft:b,opacity:"0.1"},1E3,function(){$(a).slideUp(function(){$(a).remove()})})}},handle_kural_font:function(){var a=.75/360*this.$jf.win.width();
this.$jf.k.css("font-size",a+"em")},register_handlers:function(){var a=this;this.$jf.mpage=$(":mobile-pagecontainer");this.$jf.win=$(window);this.$jf.k=$(".kural");this.handle_kural_font();this.$jf.win.on("resize",function(){a.handle_kural_font()});this.$jf.kpop=$("#kural-popup");this.$jf.kpop_content=$("#kural_popup_content");this.$jf.kpop_title=$("#kural_popup_title");this.$jf.k_a_name=$("#kural_adhikaram_name");this.$jf.k_no=$("#kural_number");this.$jf.k_porul=$("#kural_porul");this.$jf.k_thedal=
$("#kural_thedal");this.$jf.mpage.on("pagebeforechange",function(a,b){if("string"==typeof b.toPage){var c=b.toPage;switch(c.substring(c.lastIndexOf("#")+1)){case "viruppam":Suvadi.viruppam.init();break;case "suvadi_viruppam":Suvadi.settings.kural_viruppam.refresh()}}});this.$jf.mpage.on("pagechange",function(a,b){switch($(b.toPage[0]).attr("id")){case "thedal":Suvadi.$jf.k_thedal.focus()}});this.$jf.a_view=$("#adhikaram-view");this.$jf.a_view.on("click","#adhikaram_refresh",function(){Suvadi.adhikaram_refresh()});
this.$jf.a_view.on("click",".adhikaram-row",function(){var a=$(this).data("kural-yen");Suvadi.show_kural(a)});this.$jf.k_refresh=$("#kural_refresh");this.$jf.a_refresh=$("#adhikaram_refresh");this.$jf.k_refresh.on("click",function(){Suvadi.kural_refresh()});this.$jf.kstar=$("#kural_star");this.$jf.kstar.on("click",function(){var a=Suvadi.current.kural;Suvadi.is_viruppam_kural(a)?(Suvadi.viruppam.remove(a),$(this).removeClass("starred")):(Suvadi.viruppam.save(a),$(this).addClass("starred"))});var c=
$("#adhikaram"),d=$(".adhikaram-list");c.one("panelbeforeopen",function(a,l){$(this).find("form.ui-filterable input").ime({languages:["ta"]});d.click(function(){try{var a=$(this).data("adhikaram-yen");Suvadi.adhikaram[a]||(Suvadi.adhikaram[a]=new b(Suvadi.data.adhikaram[a]));c.panel("close");Suvadi.adhikaram[a].display()}catch(d){console.log("adhikaram yen data attribute not found")}})});c.on("panelbeforeclose",function(a,b){$("div.imeselector-menu").removeClass("ime-open");$("div.imeselector").hide()});
this.$jf.k_thedal.ime({languages:["ta"]});this.$jf.k_thedal.autocomplete({search:function(a,b){""==$.trim($(this).val())&&a.preventDefault()},delay:500,minLength:2,source:Suvadi.data.kural,select:function(a,b){b.item.label.split(" ");Suvadi.show_kural(b.item.yen)}}).data("ui-autocomplete")._renderItem=function(a,b){var c=b.label.split(" "),d=c[0]+" "+c[1]+" "+c[2]+" "+c[3],c=c[4]+" "+c[5]+" "+c[6];return $("<li class='kural suggestion meera'>").attr("item.autocomplete",b).append($("<a>").html(d+"<br>"+
c)).appendTo(a)};this.$jf.u_panel=$("#udhavi-panel");this.$jf.u_btn=$(".udhavi-btn");this.$jf.u_panel.panel({defaults:!0}).enhanceWithin();a=this;this.$jf.u_btn.on("click",function(){a.loader.show();a.$jf.u_panel.panel("close");var b=$(this).attr("href");switch(b){case "#ulleedu_udhavi":a.status.is_ulleedu_udhavi_loaded||(a.$jf.uu_content=$("#ulleedu_udhavi_content"),a.$jf.uu_content.load("pages/udhavi.html"),a.status.is_ulleedu_udhavi_loaded=!0);break;case "#suvadi_patri":a.status.is_suvadi_patri_loaded||
(a.$jf.patri_content=$("#suvadi_patri_content"),a.$jf.patri_content.load("pages/patri.html"),a.status.is_suvadi_patri_loaded=!0)}a.$jf.u_panel.panel({close:function(c,d){a.$jf.mpage.pagecontainer("change",b,{transition:"none"});a.loader.hide()}});return!1});this.$jf["isel-menu"]=$("div.imeselector-menu");this.$jf.isel=$("div.imeselector");this.$jf["ime-u"]=$(".ime-udhavi");this.$jf["ime-u"].click(function(a){a.preventDefault();Suvadi.$jf.mpage.pagecontainer("change","#ulledu_udhavi",{transition:"none"});
return!1});this.$jf.win.resize(function(){Suvadi.$jf["isel-menu"].removeClass("ime-open");Suvadi.$jf.isel.hide()})},show_kural:function(a){this.$jf.kpop.css("opacity","0.2");this.kural[a]||(this.kural[a]=new c(this.data.kural[a]));this.current.kural=a;this.is_viruppam_kural(a)?this.$jf.kstar.addClass("starred"):this.$jf.kstar.removeClass("starred");var b=Suvadi.kural[a].generate_view();this.$jf.kpop_content.html(b);this.$jf.k_a_name.text(this.kural[a].adhikaram.yen+". "+this.kural[a].adhikaram.title);
this.$jf.k_no.text(a);this.$jf.k_porul.text(this.kural[a].porul);this.$jf.mpage.pagecontainer("change","#kural-popup",{transition:"none"});this.$jf.kpop.animate({opacity:1},500,function(){$("ul.ui-autocomplete li").hide()})},is_viruppam_kural:function(a){var b=this.viruppam.data;return b?b[a]?!0:!1:!1},show_adhikaram:function(a){this.adhikaram[a]||(this.adhikaram[a]=new b(this.data.adhikaram[a]));this.current.adhikaram=a;this.adhikaram[a].display()},kural_refresh:function(){var a=Math.floor(1330*
Math.random())+1;this.show_kural(a)},adhikaram_refresh:function(){var a=Math.floor(133*Math.random())+1;this.show_adhikaram(a)}};c.prototype={constructor:c,get_adhikaram:function(){var a=parseInt(this.yen,10),a=Math.floor((a-1)/10)+1;return{yen:Suvadi.data.adhikaram[a].yen,title:Suvadi.data.adhikaram[a].title}},generate_view:function(){var a=this.kural.split(" ");return"<div class='kural'>"+(a[0]+" "+a[1]+" "+a[2]+" "+a[3]+"<br>"+(a[4]+" "+a[5]+" "+a[6]))+"</div>"},get_porul:function(){return Suvadi.data.porul[this.yen]?
Suvadi.data.porul[this.yen].porul:""}};b.prototype={constructor:b,generate_view:function(){var a=$("<div>"),b=$("<span>",{"class":"ui-btn ui-icon-refresh ui-btn-icon ui-btn-icon-notext refresh",id:"adhikaram_refresh"}),b=$("<div>",{"class":"adhikaram_title_header"}).append($("<span>",{"class":"adhikaram_title"}).html(this.yen+". "+this.title)).append(b);a.append(b);for(var d=this.yen,b=10*d,d=10*(d-1)+1;d<=b;d++){Suvadi.kural[d]||(Suvadi.kural[d]=new c(Suvadi.data.kural[d]));var f=Suvadi.kural[d].generate_view(),
f=$("<div>",{"class":"ui-corner-all custom-corners adhikaram-row","data-kural-yen":d}).html($("<div>",{"class":"ui-body ui-body-a"}).html(f));a.append(f)}return a},display:function(){localStorage.setItem("adhikaram_viruppam",this.yen);Suvadi.current.adhikaram=this.yen;this.$el.hide().html(this.view).fadeIn()}}})(this);
(function(){window.localStorage||Object.defineProperty(window,"localStorage",new function(){var d=[],c={};Object.defineProperty(c,"getItem",{value:function(b){return b?this[b]:null},writable:!1,configurable:!1,enumerable:!1});Object.defineProperty(c,"key",{value:function(b){return d[b]},writable:!1,configurable:!1,enumerable:!1});Object.defineProperty(c,"setItem",{value:function(b,a){b&&(document.cookie=escape(b)+"="+escape(a)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")},writable:!1,configurable:!1,
enumerable:!1});Object.defineProperty(c,"length",{get:function(){return d.length},configurable:!1,enumerable:!1});Object.defineProperty(c,"removeItem",{value:function(b){b&&(document.cookie=escape(b)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")},writable:!1,configurable:!1,enumerable:!1});this.get=function(){var b,a;for(a in c)b=d.indexOf(a),-1===b?c.setItem(a,c[a]):d.splice(b,1),delete c[a];for(d;0<d.length;d.splice(0,1))c.removeItem(d[0]);for(var e=0,k=document.cookie.split(/\s*;\s*/);e<
k.length;e++)b=k[e].split(/\s*=\s*/),1<b.length&&(c[a=unescape(b[0])]=unescape(b[1]),d.push(a));return c};this.configurable=!1;this.enumerable=!0})})();jQuery.cachedScript=function(d,c){c=$.extend(c||{},{dataType:"script",cache:!0,url:d});return jQuery.ajax(c)};
function versionCompare(d,c,b){function a(a){return(e?/^\d+[A-Za-z]*$/:/^\d+$/).test(a)}var e=b&&b.lexicographical;b=b&&b.zeroExtend;d=d.split(".");c=c.split(".");if(!d.every(a)||!c.every(a))return NaN;if(b){for(;d.length<c.length;)d.push("0");for(;c.length<d.length;)c.push("0")}e||(d=d.map(Number),c=c.map(Number));for(b=0;b<d.length;++b){if(c.length==b)return 1;if(d[b]!=c[b])return d[b]>c[b]?1:-1}return d.length!=c.length?-1:0};